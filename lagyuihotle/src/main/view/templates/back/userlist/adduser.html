<!DOCTYPE html>
<html xmlns:th ="http://www.thymeleaf.org">
	<head>
		<meta charset="utf-8">
		<title>添加用户</title>
		<script th:src="@{/jquery/jquery-3.5.1.min.js}" type="text/javascript"></script>
		<link rel="stylesheet"  th:href="@{/layui/css/layui.css}" media="all">
		<script th:src="@{/layui/layui.js}" charset="utf-8"></script>
	</head>

	<body>
	<div>
	<form  class="layui-form" lay-filter="edituser"  style="margin-left: 40%;margin-top:10%" >

		<div class="layui-form-item">
		<label class="layui-form-label">账号</label>
		<div class="layui-input-block" style="width: 200px">
			<input type="text" name="idcard" value="" lay-verify="required" class="layui-input">
		</div>
		</div>

			<div class="layui-form-item">
			    <label class="layui-form-label">名称</label>
			    <div class="layui-input-block" style="width: 200px">
			      <input type="text" name="uname" value="" lay-verify="required" class="layui-input">
			    </div>
			  </div>
			  
			<div class="layui-form-item">
			    <label class="layui-form-label">密码</label>
			    <div class="layui-input-block" style="width: 200px">
			      <input type="text" name="psw" value="" lay-verify="required" class="layui-input">
			    </div>
			</div>
			
			<div class="layui-form-item">
			    <label class="layui-form-label">手机</label>
			    <div class="layui-input-block"  style="width: 200px">
			      <input type="text" name="phone" value="" lay-verify="required" class="layui-input">
			    </div>
			</div>
			
			<div class="layui-form-item">
			    <label class="layui-form-label">类别</label>
			    <div class="layui-input-block" style="width: 200px">
			      <input type="text" name="category" value="" lay-verify="required" class="layui-input">
			    </div>
			</div>
			
			<div class="layui-form-item">
			    <div class="layui-input-block">
			      <button class="layui-btn" lay-submit lay-filter="adduser">添加用户</button>
			    </div>
			  </div>
			
		</form>
	</div>

	<script th:inline="javascript" type="text/javascript">

		$(function () {

			layui.use(['table', 'form', 'layer'], function () {
				var table = layui.table;
				var layer = layui.layer;
				var form = layui.form;

				form.on('submit(adduser)', function (data) {
					let formData = new FormData(data.form);
					alert(formData.get("phone"));
					$.ajax({
						url: "/back/adduser",
						data: formData,
						type: 'post',
						dataType: 'json',
						processData: false,
						contentType: false,
						type: 'post',
						success: function (res) {//请求成功，回调函数，data.
							if (res["flag"]) {
								layer.msg("添加成功", {iocn: 1});
							} else {
								layer.msg("添加失败", {icon: 5});
							}
						},
					});
					return false;
				});
			});
		});
	</script>
	</body>

</html>
